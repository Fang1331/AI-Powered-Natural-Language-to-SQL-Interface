# **AI Powered NLP to SQL Query System**

This project allows users to interact with a **banking dataset** by sending natural language queries. It processes these queries and generates SQL queries using the **free Gemini API**, then executes those queries against a database.

## **Installation Steps**

### **1. Clone the repository:**
```sh
git clone <repository-url>
cd <project-directory>
```

### **2. Install Required Packages:**
You need to install the following Python packages to run the project:

- **Pandas**: For data manipulation and analysis  
- **Torch**: Deep learning framework (used by Gemini API)  
- **Flask**: Web framework for creating the API  
- **Transformers**: Hugging Face's library for NLP  
- **Google-generativeai**: The AI model used for query generation  

Install all dependencies with:
```sh
pip install -r requirements.txt
```
If you don't have a `requirements.txt`, install the individual dependencies with:
```sh
pip install pandas torch flask transformers google-generativeai
```

### **3. Download Banking Dataset:**
*The database is already downloaded.* Ensure the dataset is in the same directory as the project or adjust the paths in the code accordingly.

### **4. Run the Scripts:**
```sh
python app.py
```

### **5. Access the Frontend:**
Once the Flask server is running, open the **`index.html`** file in your web browser.

To access it:
- Open `index.html` in your browser.
- Enter a natural language query.
- The Flask API will process the input and display the generated SQL query.

---

## **Project Structure**
```plaintext
â”œâ”€â”€ App.py            # Flask API for handling queries & backend logic
â”œâ”€â”€ clean_data.py     # Script to extract the zip file containing the dataset
â”œâ”€â”€ load_data.py      # Loads, cleans, renames columns, and stores data in SQLite (banking.db)
â”œâ”€â”€ n2sql.py          # Generates SQL queries from natural language using Gemini API
â”œâ”€â”€ index.html        # Frontend file with a basic form for input queries
â”œâ”€â”€ banking.db        # SQLite database with the cleaned banking dataset
â””â”€â”€ requirements.txt  # List of required Python packages
```

---

## **How It Works**
1. **User Inputs Query**: The user submits a query in natural language through the frontend form (HTML).
2. **Flask API Receives Query**: The query is sent to `App.py`, which acts as the backend server.
3. **Query Processing**:
   - `n2sql.py` uses the **Gemini API** (*youâ€™ll need an API key*) to generate an SQL statement.
4. **SQL Execution**: The SQL query is executed on the **`banking.db`** SQLite database, and results are sent back to the frontend.
5. **Response Display**: The frontend displays the SQL query generated by the backend.

---

## **Frontend (index.html)**
The `index.html` file provides a simple interface with:

- **Text Box**: Where users can input natural language queries.
- **Submit Button**: Sends the query to the Flask API and receives the SQL query output.

### **Example Query**
**Input:**
```
"How many people have subscribed to a term deposit?"
```
**Output (SQL Query):**
```sql
SELECT COUNT(*) FROM transactions WHERE y = 'yes';
```

---

## **API Documentation**

### **POST /query**
**Description:** Accepts a natural language query and returns the corresponding SQL query.

**Request Body:**
```json
{
  "query": "How many people have subscribed to a term deposit?"
}
```

**Response Body:**
```json
{
  "sql_query": "SELECT COUNT(*) FROM transactions WHERE y = 'yes';"
}
```

---

## **Required Configurations for Gemini API:**
Ensure you have an **API key** for Gemini (or any other NLP model you're using) and configure it in `n2sql.py` to allow the translation of natural language into SQL.

---

## **Troubleshooting**
- **Missing Packages**: If you encounter errors, ensure that all dependencies from `requirements.txt` are installed.
- **Gemini API Key Issue**: Double-check that the API key is correctly configured in `n2sql.py`.
- **Database Errors**: If you face issues with database connection or query execution, ensure `banking.db` is created successfully by `load_data.py` and contains valid data.

---
![Screenshot 2025-02-22 141434](https://github.com/user-attachments/assets/7d0aa8ae-3d47-47ab-a306-be71b004f510)
![Screenshot 2025-02-22 141403](https://github.com/user-attachments/assets/0ce896e6-a3cf-4a36-91f2-1cbf3e06316e)


### ðŸš€ *Now you're ready to run the AI-powered NLP to SQL Query System!* ðŸŽ‰

